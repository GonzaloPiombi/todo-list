(()=>{"use strict";class t{constructor(t,e,a,n,s){this.title=t,this.description=e,this.dueDate=a,this.priority=n,this.project=s}static tasks=[];addToArray(){t.tasks.push(this)}static removeFromArray(e){t.tasks.splice(e,1)}static editTask(e,a,n,s,o,i){t.tasks[e].title=a,t.tasks[e].description=n,t.tasks[e].dueDate=s,t.tasks[e].priority=o,t.tasks[e].project=i,console.log(t.tasks)}}const e=t;class a{static domController(){const t=a.getInformation(),e=a.addTask(t.title,t.description,t.dueDate,t.priority,t.project),n=a.generateTask(e);a.removeTask(n.removeButton),a.editTask(n.editButton)}static addButtonEvent(){document.querySelector("#add-task-button").addEventListener("click",(t=>{t.preventDefault(),a.domController(),console.log(e.tasks)}))}static getInformation(){const t=document.querySelectorAll("input");return{title:t[0].value,description:t[1].value,dueDate:t[2].value,priority:t[3].value,project:document.querySelector("select").value}}static addTask(t,a,n,s,o){const i=new e(t,a,n,s,o);return i.addToArray(),i}static generateTask(t){const e=document.createElement("div");e.classList.add("task-container");const n=document.createElement("p"),s=document.createElement("p"),o=document.createElement("p"),i=document.createElement("p"),d=document.createElement("p"),c=document.createElement("button"),r=document.createElement("button");return o.classList.add("date"),n.textContent=t.title,s.textContent=t.description,o.textContent=t.dueDate,i.textContent=t.priority,d.textContent=t.project,c.textContent="X",r.textContent="Edit",document.querySelector(".tasks").appendChild(e),e.appendChild(n),e.appendChild(s),e.appendChild(o),e.appendChild(i),e.appendChild(d),e.appendChild(c),e.appendChild(r),a.giveDataAttribute(),{removeButton:c,editButton:r}}static giveDataAttribute(){for(let t=0;t<document.querySelectorAll(".task-container").length;t++)document.querySelectorAll(".task-container")[t].setAttribute("data-index",t)}static removeTask(t){t.addEventListener("click",(t=>{t.path[1].remove(),e.removeFromArray(t.path[1].dataset.index),a.giveDataAttribute()}))}static editTask(t){t.addEventListener("click",(t=>{const e=t.path[1].childNodes;e.forEach((t=>{if("P"===t.nodeName&&t.classList.contains("date")){const e=document.createElement("input");e.setAttribute("type","date"),e.classList.add("date"),t.replaceWith(e)}else"P"===t.nodeName&&t.setAttribute("contenteditable","true")}));const n=document.createElement("button");n.textContent="Save",t.path[1].appendChild(n),n.addEventListener("click",(t=>{let s="";e.forEach((t=>{if(t.classList.contains("date")){s+=t.value+"~";const e=document.createElement("p");e.classList.add("date"),e.textContent=t.value,t.replaceWith(e)}else"true"===t.contentEditable&&(s+=t.textContent+"~",t.contentEditable="false")})),a.getNewValues(s,t.path[1].dataset.index),n.remove()}))}))}static getNewValues(t,a){const n=(t=t.split("~"))[0],s=t[1],o=t[2],i=t[3],d=t[4];e.editTask(a,n,s,o,i,d)}}a.addButtonEvent()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUdFLFFBQVF2QyxPQUMzQ2dELEVBQVdWLGVBS3ZCLG9CQUFvQmUsRUFBUUMsR0FHeEIsTUFBTS9ELEdBRk44RCxFQUFTQSxFQUFPRSxNQUFNLE1BRUQsR0FDZi9ELEVBQWM2RCxFQUFPLEdBQ3JCNUQsRUFBVTRELEVBQU8sR0FDakIzRCxFQUFXMkQsRUFBTyxHQUNsQjFELEVBQVUwRCxFQUFPLEdBRXZCLFdBQWNDLEVBQUsvRCxFQUFPQyxFQUFhQyxFQUFTQyxFQUFVQyxJQUlsRSxFQzlJQSxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy90YXNrcy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgfVxuXG4gICAgc3RhdGljIHRhc2tzID0gW107XG5cbiAgICBhZGRUb0FycmF5KCkge1xuICAgICAgICBUYXNrLnRhc2tzLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgc3RhdGljIHJlbW92ZUZyb21BcnJheShpbmRleCkge1xuICAgICAgICBUYXNrLnRhc2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGVkaXRUYXNrKGluZGV4LCB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0KSB7XG4gICAgICAgIFRhc2sudGFza3NbaW5kZXhdLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIFRhc2sudGFza3NbaW5kZXhdLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIFRhc2sudGFza3NbaW5kZXhdLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICBUYXNrLnRhc2tzW2luZGV4XS5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICBUYXNrLnRhc2tzW2luZGV4XS5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgY29uc29sZS5sb2coVGFzay50YXNrcyk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUYXNrIiwiaW1wb3J0IFRhc2sgZnJvbSAnLi90YXNrcyc7XG5cbmNsYXNzIFVJIHtcblxuICAgIHN0YXRpYyBkb21Db250cm9sbGVyKCkge1xuICAgICAgICBjb25zdCBpbmZvID0gVUkuZ2V0SW5mb3JtYXRpb24oKTtcbiAgICAgICAgY29uc3QgdGFzayA9IFVJLmFkZFRhc2soaW5mby50aXRsZSwgaW5mby5kZXNjcmlwdGlvbiwgaW5mby5kdWVEYXRlLCBpbmZvLnByaW9yaXR5LCBpbmZvLnByb2plY3QpO1xuICAgICAgICBjb25zdCBidXR0b25zID0gVUkuZ2VuZXJhdGVUYXNrKHRhc2spO1xuICAgICAgICBVSS5yZW1vdmVUYXNrKGJ1dHRvbnMucmVtb3ZlQnV0dG9uKTtcbiAgICAgICAgVUkuZWRpdFRhc2soYnV0dG9ucy5lZGl0QnV0dG9uKTtcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGFkZEJ1dHRvbkV2ZW50KCkge1xuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXRhc2stYnV0dG9uJyk7XG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBVSS5kb21Db250cm9sbGVyKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhUYXNrLnRhc2tzKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0SW5mb3JtYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IGZvcm1JbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBmb3JtSW5mb1swXS52YWx1ZTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBmb3JtSW5mb1sxXS52YWx1ZTtcbiAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGZvcm1JbmZvWzJdLnZhbHVlO1xuICAgICAgICBjb25zdCBwcmlvcml0eSA9IGZvcm1JbmZvWzNdLnZhbHVlO1xuICAgICAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0JykudmFsdWU7XG4gICAgICAgIHJldHVybiB7dGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgcHJvamVjdH07XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZFRhc2sodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgcHJvamVjdCkge1xuICAgICAgICAvL0NyZWF0ZSBuZXcgaW5zdGFuY2Ugb2YgVGFzay5cbiAgICAgICAgY29uc3QgbmV3VGFzayA9IG5ldyBUYXNrKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QpO1xuXG4gICAgICAgIC8vQWRkIHRoZSB0YXNrIHRvIHRoZSBhcnJheS5cbiAgICAgICAgbmV3VGFzay5hZGRUb0FycmF5KCk7XG4gICAgICAgIHJldHVybiBuZXdUYXNrO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZW5lcmF0ZVRhc2sob2JqKSB7XG4gICAgICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0YXNrLWNvbnRhaW5lcicpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgICAgICAgLy9BZGQgY2xhc3Mgc28gd2hlbiB3ZSB3YW50IHRvIGVkaXQgZGF0ZSBpcyB0cmVhdGVkIGRpZmZlcmVudGx5IGZyb20gdGhlIG90aGVyIGlucHV0cyBhbmQgY2FuIG9ubHkgYmUgdXBkYXRlZCBhcyBhIGRhdGUuXG4gICAgICAgIGR1ZURhdGUuY2xhc3NMaXN0LmFkZCgnZGF0ZScpO1xuXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gb2JqLnRpdGxlO1xuICAgICAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG9iai5kZXNjcmlwdGlvbjtcbiAgICAgICAgZHVlRGF0ZS50ZXh0Q29udGVudCA9IG9iai5kdWVEYXRlO1xuICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IG9iai5wcmlvcml0eTtcbiAgICAgICAgcHJvamVjdC50ZXh0Q29udGVudCA9IG9iai5wcm9qZWN0O1xuICAgICAgICByZW1vdmVCdXR0b24udGV4dENvbnRlbnQgPSAnWCc7XG4gICAgICAgIGVkaXRCdXR0b24udGV4dENvbnRlbnQgPSAnRWRpdCdcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3MnKS5hcHBlbmRDaGlsZCh0YXNrQ29udGFpbmVyKTtcbiAgICAgICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gICAgICAgIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuICAgICAgICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKGR1ZURhdGUpO1xuICAgICAgICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKHByaW9yaXR5KTtcbiAgICAgICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0KTtcbiAgICAgICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZChyZW1vdmVCdXR0b24pO1xuICAgICAgICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xuXG4gICAgICAgIFVJLmdpdmVEYXRhQXR0cmlidXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIHtyZW1vdmVCdXR0b24sIGVkaXRCdXR0b259O1xuICAgIH1cblxuICAgIHN0YXRpYyBnaXZlRGF0YUF0dHJpYnV0ZSgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFzay1jb250YWluZXInKS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhc2stY29udGFpbmVyJylbaV0uc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgaSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgcmVtb3ZlVGFzayhidXR0b24pIHtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICBlLnBhdGhbMV0ucmVtb3ZlKCk7XG4gICAgICAgICAgICBUYXNrLnJlbW92ZUZyb21BcnJheShlLnBhdGhbMV0uZGF0YXNldC5pbmRleCk7XG4gICAgICAgICAgICBVSS5naXZlRGF0YUF0dHJpYnV0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZWRpdFRhc2soYnV0dG9uKSB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBlLnBhdGhbMV0uY2hpbGROb2RlcztcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ubm9kZU5hbWUgPT09ICdQJyAmJiBpdGVtLmNsYXNzTGlzdC5jb250YWlucygnZGF0ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgndHlwZScsICdkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGUuY2xhc3NMaXN0LmFkZCgnZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnJlcGxhY2VXaXRoKGRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLm5vZGVOYW1lID09PSAnUCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIHNhdmVCdXR0b24udGV4dENvbnRlbnQgPSAnU2F2ZSc7XG4gICAgICAgICAgICBlLnBhdGhbMV0uYXBwZW5kQ2hpbGQoc2F2ZUJ1dHRvbik7XG5cbiAgICAgICAgICAgIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlcyA9ICcnO1xuICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnZGF0ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzICs9IGl0ZW0udmFsdWUgKyAnfic7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYS5jbGFzc0xpc3QuYWRkKCdkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhLnRleHRDb250ZW50ID0gaXRlbS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVwbGFjZVdpdGgocGFyYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5jb250ZW50RWRpdGFibGUgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyArPSBpdGVtLnRleHRDb250ZW50ICsgJ34nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb250ZW50RWRpdGFibGUgPSAnZmFsc2UnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgVUkuZ2V0TmV3VmFsdWVzKGNoYW5nZXMsIGUucGF0aFsxXS5kYXRhc2V0LmluZGV4KTtcbiAgICAgICAgICAgICAgICBzYXZlQnV0dG9uLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXROZXdWYWx1ZXMoc3RyaW5nLCBkaXYpIHtcbiAgICAgICAgc3RyaW5nID0gc3RyaW5nLnNwbGl0KCd+Jyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aXRsZSA9IHN0cmluZ1swXTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBzdHJpbmdbMV07XG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBzdHJpbmdbMl07XG4gICAgICAgIGNvbnN0IHByaW9yaXR5ID0gc3RyaW5nWzNdO1xuICAgICAgICBjb25zdCBwcm9qZWN0ID0gc3RyaW5nWzRdO1xuICAgICBcbiAgICAgICAgVGFzay5lZGl0VGFzayhkaXYsIHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVUkiLCJpbXBvcnQgVGFzayBmcm9tICcuL3Rhc2tzJztcbmltcG9ydCBVSSBmcm9tICcuL2RvbSc7XG5cblVJLmFkZEJ1dHRvbkV2ZW50KCk7Il0sIm5hbWVzIjpbIlRhc2siLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJwcm9qZWN0IiwidGhpcyIsImFkZFRvQXJyYXkiLCJ0YXNrcyIsInB1c2giLCJpbmRleCIsInNwbGljZSIsImNvbnNvbGUiLCJsb2ciLCJVSSIsImluZm8iLCJnZXRJbmZvcm1hdGlvbiIsInRhc2siLCJhZGRUYXNrIiwiYnV0dG9ucyIsImdlbmVyYXRlVGFzayIsInJlbW92ZVRhc2siLCJyZW1vdmVCdXR0b24iLCJlZGl0VGFzayIsImVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZG9tQ29udHJvbGxlciIsImZvcm1JbmZvIiwicXVlcnlTZWxlY3RvckFsbCIsInZhbHVlIiwibmV3VGFzayIsIm9iaiIsInRhc2tDb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImdpdmVEYXRhQXR0cmlidXRlIiwiaSIsImxlbmd0aCIsInNldEF0dHJpYnV0ZSIsImJ1dHRvbiIsInBhdGgiLCJyZW1vdmUiLCJkYXRhc2V0IiwiaXRlbXMiLCJjaGlsZE5vZGVzIiwiZm9yRWFjaCIsIml0ZW0iLCJub2RlTmFtZSIsImNvbnRhaW5zIiwiZGF0ZSIsInJlcGxhY2VXaXRoIiwic2F2ZUJ1dHRvbiIsImNoYW5nZXMiLCJwYXJhIiwiY29udGVudEVkaXRhYmxlIiwiZ2V0TmV3VmFsdWVzIiwic3RyaW5nIiwiZGl2Iiwic3BsaXQiXSwic291cmNlUm9vdCI6IiJ9